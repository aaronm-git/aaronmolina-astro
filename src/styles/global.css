@import 'tailwindcss';

@custom-variant dark (&:where([data-theme=dark], [data-theme=dark] *));

/**
 * Goldie palette
 * - Navy:     #14213D
 * - White:    #FFFFFF
 * - Platinum: #E5E5E5
 * - Orange:   #FCA311
 * - Black:    #000000
 *
 * Implementation note:
 * - We expose ONLY semantic tokens to Tailwind via @theme so templates use
 *   classes like bg-background, text-foreground, bg-primary, bg-secondary, etc.
 * - Theme switching is handled by [data-theme="dark"] (already wired in layout).
 */

:root {
  /* Palette */
  --palette-navy: #14213d;
  --palette-white: #ffffff;
  --palette-platinum: #e5e5e5;
  --palette-orange: #fca311;
  --palette-black: #000000;

  /* Icon sizing and spacing */
  --icon-size-sm: 1rem; /* 16px - for buttons/links */
  --icon-size-base: 1.25rem; /* 20px - for list items with text */
  --icon-size-lg: 2rem; /* 32px - for section headings */
  --icon-size-xl: 3rem; /* 48px - for hero/large standalone icons */
  --icon-spacing: 0.75rem; /* 12px - spacing between icon and text */

  /* Semantic tokens (light) */
  --background: var(--palette-white);
  --surface: var(--palette-white);
  --muted: var(--palette-platinum);
  --border: var(--palette-platinum);

  --foreground: var(--palette-black);
  --foreground-muted: color-mix(in srgb, var(--foreground) 65%, transparent);

  --primary: var(--palette-navy);
  --primary-hover: color-mix(in srgb, var(--primary) 85%, var(--palette-black));
  --on-primary: var(--palette-white);

  --secondary: var(--palette-orange);
  --secondary-hover: color-mix(in srgb, var(--secondary) 85%, var(--palette-black));
  --on-secondary: var(--palette-black);

  --ring: var(--secondary);
}

[data-theme='dark'] {
  /* Semantic tokens (dark) */
  --background: var(--palette-black);
  --surface: var(--palette-navy);

  /* Use translucent neutrals in dark mode so UI stays calm */
  --muted: color-mix(in srgb, var(--palette-platinum) 10%, transparent);
  --border: color-mix(in srgb, var(--palette-platinum) 18%, transparent);

  --foreground: var(--palette-white);
  --foreground-muted: color-mix(in srgb, var(--foreground) 75%, transparent);

  /* Brand colors remain consistent */
  --primary: var(--palette-navy);
  --primary-hover: color-mix(in srgb, var(--primary) 85%, var(--palette-black));
  --on-primary: var(--palette-white);

  --secondary: var(--palette-orange);
  --secondary-hover: color-mix(in srgb, var(--secondary) 85%, var(--palette-black));
  --on-secondary: var(--palette-black);

  --ring: var(--secondary);
}

@theme {
  /* Semantic colors (Tailwind v4 tokens) */
  --color-background: var(--background);
  --color-surface: var(--surface);
  --color-muted: var(--muted);
  --color-border: var(--border);

  --color-foreground: var(--foreground);
  --color-foreground-muted: var(--foreground-muted);

  --color-primary: var(--primary);
  --color-primary-hover: var(--primary-hover);
  --color-on-primary: var(--on-primary);

  --color-secondary: var(--secondary);
  --color-secondary-hover: var(--secondary-hover);
  --color-on-secondary: var(--on-secondary);

  --color-ring: var(--ring);

  /* Icon sizing */
  --size-icon-sm: var(--icon-size-sm);
  --size-icon-base: var(--icon-size-base);
  --size-icon-lg: var(--icon-size-lg);
  --size-icon-xl: var(--icon-size-xl);

  /* Icon spacing */
  --spacing-icon: var(--icon-spacing);
}

@theme inline {
  /* Custom colors for Atom theme */
  --color-atom-bg: #1d1f21;
  --color-atom-text: #c5c8c6;
  --color-atom-comment: #969896;
  --color-atom-red: #cc6666;
  --color-atom-orange: #de935f;
  --color-atom-yellow: #f0c674;
  --color-atom-green: #b5bd68;
  --color-atom-aqua: #8abeb7;
  --color-atom-blue: #81a2be;
  --color-atom-purple: #b294bb;
  --color-atom-selection: #373b41;
  --color-atom-line-highlight: #2f3129;
}

/* ==========================================================================
   BASE LAYER
   Default styles for HTML elements (resets, normalizations, defaults)
   ========================================================================== */

@layer base {
  html {
    scroll-behavior: smooth;
  }

  body {
    @apply bg-background;
  }

  /* Scroll margin for anchor links */
  [id] {
    scroll-margin-top: 2rem;
  }

  /* Interactive elements should show pointer cursor */
  a:not([disabled]),
  button:not([disabled]) {
    @apply cursor-pointer;
  }
}

/* ==========================================================================
   COMPONENTS LAYER
   Class-based component styles (.typography, .card, .btn, etc.)
   These can be overridden by utility classes when needed.
   ========================================================================== */

@layer components {
  /* Main content minimum height (accounts for header/footer) */
  main {
    @apply min-h-[calc(100vh-53px-69px-24px)];
  }

  /* Icon utility classes */
  .icon-sm {
    width: var(--icon-size-sm);
    height: var(--icon-size-sm);
  }

  .icon-base {
    width: var(--icon-size-base);
    height: var(--icon-size-base);
  }

  .icon-lg {
    width: var(--icon-size-lg);
    height: var(--icon-size-lg);
  }

  .icon-xl {
    width: var(--icon-size-xl);
    height: var(--icon-size-xl);
  }

  .icon-spacing-left {
    margin-left: var(--icon-spacing);
  }

  .icon-spacing-right {
    margin-right: var(--icon-spacing);
  }

  /* Typography component for rich text/markdown content */
  .typography {
    @apply text-foreground;
    line-height: var(--leading-relaxed);

    h1 {
      font-size: var(--text-3xl);
      font-weight: var(--font-weight-bold);
      @apply text-foreground border-border border-b;
      margin-top: 2rem;
      margin-bottom: 1rem;
      padding-bottom: 0.5rem;
    }

    h2 {
      font-size: var(--text-2xl);
      font-weight: var(--font-weight-semibold);
      @apply text-foreground;
      margin-top: 1.5rem;
      margin-bottom: 0.75rem;
    }

    h3 {
      font-size: var(--text-xl);
      font-weight: var(--font-weight-semibold);
      @apply text-foreground;
      margin-top: 1.25rem;
      margin-bottom: 0.5rem;
    }

    h4 {
      font-size: var(--text-lg);
      font-weight: var(--font-weight-semibold);
      @apply text-foreground;
      margin-top: 1rem;
      margin-bottom: 0.5rem;
    }

    h5 {
      font-size: var(--text-base);
      font-weight: var(--font-weight-semibold);
      @apply text-foreground;
      margin-top: 0.75rem;
      margin-bottom: 0.5rem;
    }

    h6 {
      font-size: var(--text-sm);
      font-weight: var(--font-weight-semibold);
      @apply text-foreground;
      margin-top: 0.75rem;
      margin-bottom: 0.5rem;
    }

    p {
      font-size: var(--text-base);
      @apply text-foreground-muted;
      margin-bottom: 1rem;
      line-height: var(--leading-normal);
    }

    a {
      @apply text-secondary decoration-secondary;
      text-decoration: underline;
      transition: color 0.2s ease;

      &:hover {
        @apply text-secondary-hover decoration-secondary-hover;
      }
    }

    strong {
      font-weight: var(--font-weight-semibold);
      @apply text-foreground;
    }

    em {
      font-style: italic;
      @apply text-foreground-muted;
    }

    ul {
      list-style-type: disc;
      padding-left: 1.5rem;
      margin-bottom: 1rem;

      li {
        @apply text-foreground-muted;
        line-height: var(--leading-normal);
        margin-bottom: 0.5rem;

        ul,
        ol {
          margin-top: 0.5rem;
          margin-left: 1.5rem;
          margin-bottom: 0;
        }
      }
    }

    ol {
      list-style-type: decimal;
      padding-left: 1.5rem;
      margin-bottom: 1rem;

      li {
        @apply text-foreground-muted;
        line-height: var(--leading-normal);
        margin-bottom: 0.5rem;

        ul,
        ol {
          margin-top: 0.5rem;
          margin-left: 1.5rem;
          margin-bottom: 0;
        }
      }
    }

    blockquote {
      @apply border-border text-foreground-muted bg-muted border-l-4;
      padding-left: 1rem;
      padding-top: 0.5rem;
      padding-bottom: 0.5rem;
      font-style: italic;
      margin: 1rem 0;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      @apply border-border border;
      margin: 1rem 0;

      th {
        @apply bg-muted border-border text-foreground border;
        padding: 0.75rem 1rem;
        text-align: left;
        font-weight: var(--font-weight-semibold);
      }

      td {
        @apply border-border text-foreground-muted border;
        padding: 0.75rem 1rem;
      }
    }

    hr {
      margin: 2rem 0;
      @apply border-border border-t;
    }

    /* Inline code */
    code {
      @apply bg-muted text-foreground;
      padding: 0.125rem 0.25rem;
      border-radius: var(--radius-sm);
      font-size: var(--text-sm);
      font-family: ui-monospace, SFMono-Regular, 'SF Mono', Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;
    }

    /* Code blocks with Atom theme */
    pre {
      background-color: var(--color-atom-bg);
      color: var(--color-atom-text);
      border-radius: var(--radius-lg);
      overflow-x: auto;
      margin: 1rem 0;
      padding: 1rem;
      font-size: var(--text-sm);
      line-height: var(--leading-normal);

      code {
        background-color: transparent;
        color: inherit;
        padding: 0;
        border-radius: 0;
        font-family: 'Fira Code', 'Monaco', 'Cascadia Code', 'Roboto Mono', ui-monospace, SFMono-Regular, monospace;

        /* Atom Theme Syntax Highlighting */
        .token.comment,
        .token.prolog,
        .token.doctype,
        .token.cdata {
          color: var(--color-atom-comment);
          font-style: italic;
        }

        .token.punctuation {
          color: var(--color-atom-text);
        }

        .token.property,
        .token.tag,
        .token.boolean,
        .token.number,
        .token.constant,
        .token.symbol,
        .token.deleted {
          color: var(--color-atom-red);
        }

        .token.selector,
        .token.attr-name,
        .token.string,
        .token.char,
        .token.builtin,
        .token.inserted {
          color: var(--color-atom-green);
        }

        .token.operator,
        .token.entity,
        .token.url,
        .language-css .token.string,
        .style .token.string {
          color: var(--color-atom-aqua);
        }

        .token.atrule,
        .token.attr-value,
        .token.keyword {
          color: var(--color-atom-blue);
        }

        .token.function,
        .token.class-name {
          color: var(--color-atom-yellow);
        }

        .token.regex,
        .token.important,
        .token.variable {
          color: var(--color-atom-orange);
        }

        .token.important,
        .token.bold {
          font-weight: var(--font-weight-bold);
        }

        .token.italic {
          font-style: italic;
        }

        .token.entity {
          cursor: help;
        }

        /* Line highlighting */
        .highlight-line {
          background-color: var(--color-atom-line-highlight);
          display: block;
          margin-right: -1rem;
          margin-left: -1rem;
          padding-right: 1rem;
          padding-left: 0.75rem;
          border-left: 0.25rem solid var(--color-atom-blue);
        }
      }
    }

    /* Code block with language label */
    pre[class*='language-'] {
      position: relative;

      &::before {
        content: attr(data-language);
        position: absolute;
        top: 0;
        right: 0;
        background-color: var(--color-atom-selection);
        color: var(--color-atom-text);
        padding: 0.25rem 0.5rem;
        font-size: var(--text-xs);
        text-transform: uppercase;
        letter-spacing: var(--tracking-wide);
        border-bottom-left-radius: var(--radius-sm);
      }
    }

    /* Inline code in headings */
    h1 code,
    h2 code,
    h3 code,
    h4 code,
    h5 code,
    h6 code {
      @apply bg-muted text-foreground;
    }

    /* Images */
    img {
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-md);
      margin: 1rem 0;
      max-width: 100%;
      height: auto;
    }

    /* Figure and figcaption */
    figure {
      margin: 1.5rem 0;

      figcaption {
        font-size: var(--text-sm);
        @apply text-foreground-muted;
        text-align: center;
        margin-top: 0.5rem;
        font-style: italic;
      }
    }

    /* Responsive adjustments */
    @media (max-width: 640px) {
      h1 {
        font-size: var(--text-2xl);
      }

      h2 {
        font-size: var(--text-xl);
      }

      h3 {
        font-size: var(--text-lg);
      }

      pre {
        font-size: var(--text-xs);
      }
    }
  }

  /* Initial animation states to prevent jumping on load (JS-only) */
  .js .hero-image {
    opacity: 0;
    transform: scale(0.8);
  }

  .js .hero-title {
    opacity: 0;
    transform: translateY(50px);
  }

  .js .hero-subtitle,
  .js .hero-description,
  .js .hero-cta {
    opacity: 0;
    transform: translateY(30px);
  }

  .js .animate-card {
    opacity: 0;
    transform: translateY(50px);
  }

  .js .animate-section h2 {
    opacity: 0;
    transform: translateY(30px);
  }

  .js .animate-content {
    opacity: 0;
    transform: translateY(30px);
  }
}
