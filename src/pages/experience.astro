---
import MainLayout from '@/layouts/main-layout.astro';
import ExperienceCard from '@/components/ExperienceCard.astro';
import { getCollection } from 'astro:content';
import CTA from '@/components/CTA.astro';
import { FaBriefcase, FaBrain, FaAward, FaCheckCircle, FaChartLine, FaCode, FaMobile, FaBolt, FaUsers, FaEye, FaCloud } from 'react-icons/fa';

const experience = await getCollection('experience');
const sortedExperience = experience.sort((a, b) => {
  if (a.data.current && !b.data.current) return -1;
  if (!a.data.current && b.data.current) return 1;
  return b.data.date.getTime() - a.data.date.getTime();
});

const yearsOfExperience = new Date().getFullYear() - 2012;
---

<MainLayout>
  <!-- Header Section -->
  <header class="animate-section mb-12 text-center">
    <h1 class="text-foreground mb-4 text-5xl font-bold">Professional Experience</h1>
    <p class="text-foreground-muted mb-6 text-xl">
      {yearsOfExperience}+ years of building exceptional web experiences
    </p>
    <p class="text-foreground-muted mx-auto max-w-3xl text-lg leading-relaxed">
      My journey as a developer has taken me through various technologies, teams, and challenges. Here's a comprehensive overview of my professional experience, skills, and
      achievements.
    </p>
  </header>

  <!-- Experience Timeline -->
  <section class="animate-section mb-16">
    <h2 class="text-foreground mb-8 flex items-center gap-3 text-2xl font-bold md:text-3xl">
      <FaBriefcase className="text-secondary icon-lg icon-spacing-right" />
      Work Experience
    </h2>

    <div class="animate-content space-y-8">
      {sortedExperience.map(exp => <ExperienceCard experience={exp} showAllDetails={true} />)}
    </div>
  </section>

  <!-- Career Highlights -->
  <section class="animate-section mb-16">
    <h2 class="text-foreground mb-8 flex items-center gap-3 text-2xl font-bold md:text-3xl">
      <FaAward className="text-secondary icon-lg icon-spacing-right" />
      Career Highlights
    </h2>

    <div class="grid gap-8 md:grid-cols-2">
      <div class="animate-content bg-surface border-border rounded-lg border p-6 shadow-md">
        <h3 class="text-foreground mb-4 flex items-center gap-2 text-lg font-semibold">
          <FaChartLine className="text-secondary icon-base icon-spacing-right" />
          Key Achievements
        </h3>
        <ul class="space-y-3">
          {
            experience
              .flatMap(exp => exp.data.achievements)
              .slice(0, 6)
              .map(achievement => (
                <li class="text-foreground-muted flex items-start gap-2 text-sm">
                  <FaCheckCircle className="text-secondary mt-0.5 icon-base flex-shrink-0 icon-spacing-right" />
                  {achievement}
                </li>
              ))
          }
        </ul>
      </div>

      <div class="animate-content bg-surface border-border rounded-lg border p-6 shadow-md">
        <h3 class="text-foreground mb-4 flex items-start gap-2 text-lg font-semibold">
          <FaBrain className="text-secondary icon-base icon-spacing-right" />
          Core Competencies
        </h3>
        <ul class="space-y-3">
          <li class="text-foreground-muted flex items-start gap-2 text-sm">
            <FaCode className="text-secondary mt-0.5 icon-base flex-shrink-0 icon-spacing-right" />
            Full-stack web development with modern frameworks
          </li>
          <li class="text-foreground-muted flex items-start gap-2 text-sm">
            <FaMobile className="text-secondary mt-0.5 icon-base flex-shrink-0 icon-spacing-right" />
            Responsive design and mobile-first development
          </li>
          <li class="text-foreground-muted flex items-start gap-2 text-sm">
            <FaBolt className="text-secondary mt-0.5 icon-base flex-shrink-0 icon-spacing-right" />
            Performance optimization and Core Web Vitals
          </li>
          <li class="text-foreground-muted flex items-start gap-2 text-sm">
            <FaUsers className="text-secondary mt-0.5 icon-base flex-shrink-0 icon-spacing-right" />
            Cross-functional team collaboration and leadership
          </li>
          <li class="text-foreground-muted flex items-start gap-2 text-sm">
            <FaEye className="text-secondary mt-0.5 icon-base flex-shrink-0 icon-spacing-right" />
            Accessibility standards and inclusive design
          </li>
          <li class="text-foreground-muted flex items-start gap-2 text-sm">
            <FaCloud className="text-secondary mt-0.5 icon-base flex-shrink-0 icon-spacing-right" />
            Cloud platforms and DevOps practices
          </li>
        </ul>
      </div>
    </div>
  </section>

  <div class="animate-section">
    <CTA />
  </div>
</MainLayout>
