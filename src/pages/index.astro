---
<<<<<<< HEAD
import MainLayout from "@/layouts/main-layout.astro";
import { getCollection } from "astro:content";

const posts = await getCollection("blog");
const recentPosts = posts
	.sort((a, b) => b.data.date.getTime() - a.data.date.getTime())
	.slice(0, 3);
---

<MainLayout>
	<div class="max-w-4xl mx-auto p-8">
		<header class="mb-12 text-center">
			<h1 class="text-5xl font-bold mb-4 text-primary-900">Aaron Molina</h1>
			<p class="text-xl text-primary-700">Senior Frontend & Fullstack Developer</p>
			<p class="text-lg text-primary-600 mt-2">Modern web technologies • Performance optimization • TypeScript • React</p>
		</header>

		<div class="grid md:grid-cols-2 gap-8 mb-12">
			<div class="bg-white p-6 rounded-lg shadow-md border border-primary-100">
				<h2 class="text-2xl font-semibold mb-4 text-primary-900 flex items-center gap-2">
					<span data-feather="edit-3" class="text-secondary-600"></span>
					Content Management
				</h2>
				<p class="text-primary-600 mb-4">
					Your site is now equipped with DecapCMS for easy content management. Edit pages and posts through a beautiful
					web interface.
				</p>
				<a
					href="/admin"
					class="inline-flex items-center gap-2 bg-secondary-600 text-white px-6 py-3 rounded-lg hover:bg-secondary-700 transition-colors"
				>
					<span data-feather="external-link"></span>
					Access CMS Admin
				</a>
			</div>

			<div class="bg-white p-6 rounded-lg shadow-md border border-primary-100">
				<h2 class="text-2xl font-semibold mb-4 text-primary-900 flex items-center gap-2">
					<span data-feather="file-text" class="text-primary-600"></span>
					Sample Content
				</h2>
				<p class="text-primary-600 mb-4">
					Check out the sample content page to see how DecapCMS-managed content is displayed in your Astro site.
				</p>
				<a
					href="/about"
					class="inline-flex items-center gap-2 bg-primary-600 text-white px-6 py-3 rounded-lg hover:bg-primary-700 transition-colors"
				>
					<span data-feather="eye"></span>
					View Sample Page
				</a>
			</div>
		</div>

		{recentPosts.length > 0 && (
			<div class="bg-white p-6 rounded-lg shadow-md border border-primary-100 mb-8">
				<div class="flex justify-between items-center mb-6">
					<h2 class="text-2xl font-semibold text-primary-900 flex items-center gap-2">
						<span data-feather="book-open" class="text-primary-600"></span>
						Recent Blog Posts
					</h2>
					<a href="/blog" class="text-secondary-600 hover:text-secondary-800 font-medium flex items-center gap-1">
						View all posts <span data-feather="arrow-right"></span>
					</a>
				</div>
				
				<div class="space-y-4">
					{recentPosts.map((post) => (
						<article class="border-b border-primary-100 pb-4 last:border-b-0">
							<h3 class="text-lg font-semibold text-primary-900 mb-2">
								<a href={`/blog/${post.data.slug}`} class="hover:text-secondary-600 transition-colors">
									{post.data.title}
								</a>
							</h3>
							<div class="flex items-center text-sm text-primary-600 mb-2">
								<span data-feather="calendar" class="w-4 h-4 mr-1"></span>
								<time datetime={post.data.date.toISOString()}>
									{post.data.date.toLocaleDateString('en-US', {
										year: 'numeric',
										month: 'short',
										day: 'numeric'
									})}
								</time>
							</div>
							{post.data.description && (
								<p class="text-primary-700 text-sm">
									{post.data.description}
								</p>
							)}
						</article>
					))}
				</div>
			</div>
		)}

		<div class="bg-primary-50 p-6 rounded-lg border border-primary-100">
			<h3 class="text-xl font-semibold mb-4 flex items-center gap-2">
				<span data-feather="check-circle" class="text-secondary-600"></span>
				What's Configured
			</h3>
			<ul class="space-y-2 text-primary-700">
				<li class="flex items-center gap-2">
					<span data-feather="check" class="w-4 h-4 text-secondary-600"></span>
					DecapCMS with JavaScript configuration (no YAML!)
				</li>
				<li class="flex items-center gap-2">
					<span data-feather="check" class="w-4 h-4 text-secondary-600"></span>
					Git-based content management
				</li>
				<li class="flex items-center gap-2">
					<span data-feather="check" class="w-4 h-4 text-secondary-600"></span>
					Pages and blog posts collections
				</li>
				<li class="flex items-center gap-2">
					<span data-feather="check" class="w-4 h-4 text-secondary-600"></span>
					Image upload support
				</li>
				<li class="flex items-center gap-2">
					<span data-feather="check" class="w-4 h-4 text-secondary-600"></span>
					Markdown editing with preview
				</li>
				<li class="flex items-center gap-2">
					<span data-feather="check" class="w-4 h-4 text-secondary-600"></span>
					Astro integration with Tailwind CSS
				</li>
				<li class="flex items-center gap-2">
					<span data-feather="check" class="w-4 h-4 text-secondary-600"></span>
					Dynamic blog post generation
				</li>
				<li class="flex items-center gap-2">
					<span data-feather="check" class="w-4 h-4 text-secondary-600"></span>
					SEO-optimized metadata
				</li>
			</ul>
		</div>
	</div>
=======
import MainLayout from '@/layouts/main-layout.astro';
import ProjectCard from '@/components/ProjectCard.astro';
import ExperienceCard from '@/components/ExperienceCard.astro';
import CTA from '@/components/CTA.astro';
import { getCollection } from 'astro:content';
import ProfilePicture from '@/assets/images/profile-picture-square.jpg';
import { Image } from 'astro:assets';
import { FaBriefcase, FaBookOpen, FaStar, FaArrowRight, FaEdit, FaCalendarAlt } from 'react-icons/fa';

const posts = await getCollection('blog');
const currentDate = new Date();
const recentPosts = posts
  .filter(post => post.data.publishDate !== null)
  .filter(post => post.data.publishDate! <= currentDate)
  .sort((a, b) => b.data.publishDate!.getTime() - a.data.publishDate!.getTime())
  .slice(0, 3);

const experience = await getCollection('experience');
const sortedExperience = experience
  .sort((a, b) => {
    if (a.data.current && !b.data.current) return -1;
    if (!a.data.current && b.data.current) return 1;
    return b.data.date.getTime() - a.data.date.getTime();
  })
  .slice(0, 4);

const projects = await getCollection('projects');
const featuredProjects = projects
  .filter(project => project.data.pinned)
  .sort((a, b) => {
    if (a.data.pinned && !b.data.pinned) return -1;
    if (!a.data.pinned && b.data.pinned) return 1;
    return (b.data.completedOn?.getTime() || 0) - (a.data.completedOn?.getTime() || 0);
  })
  .slice(0, 3);

const yearsOfExperience = new Date().getFullYear() - 2012;
---

<MainLayout>
  <!-- Hero Section -->
  <header class="mb-16 text-center">
    <div class="hero-image mb-8 flex justify-center">
      <Image
        src={ProfilePicture}
        alt="Aaron Molina - Software Web Engineer"
        class="border-border h-32 w-32 rounded-full border-2 object-cover object-[20%_40%] shadow-lg md:h-48 md:w-48"
        loading="eager"
      />
    </div>
    <h1 class="hero-title text-foreground mb-1 text-4xl font-bold md:mb-6 md:text-6xl">Aaron Molina</h1>
    <p class="hero-subtitle text-foreground-muted mb-4 text-lg font-medium md:text-2xl">Senior Frontend & Fullstack Developer</p>
    <p class="hero-description text-foreground-muted mx-auto max-w-3xl text-base leading-relaxed md:text-lg">
      Building modern, high-performannt web websites with Sanity.io, Next.js, Astro, and Tailwind CSS. With over {yearsOfExperience} years of experience, I've worked with a variety
      of technologies, including Supabase, MongoDB, Cloudinary, and AWS, where I focus on scalable architecture and best practices for user experiences.
    </p>
    <div class="mt-8 flex flex-col items-center justify-center gap-4 max-md:gap-2 md:flex-row">
      <a
        href="/projects"
        class="hero-cta bg-secondary hover:bg-secondary-hover text-on-secondary inline-flex items-center gap-2 rounded-lg px-8 py-3 font-medium transition-colors"
      >
        <FaBriefcase className="icon-sm" />
        View My Work
      </a>
      <a
        href="/blog"
        class="hero-cta bg-primary hover:bg-primary-hover text-on-primary inline-flex items-center gap-2 rounded-lg px-8 py-3 font-medium transition-colors"
      >
        <FaBookOpen className="icon-sm" />
        Read My Blog
      </a>
    </div>
  </header>

  <!-- Featured Projects Section -->
  <section class="animate-section mb-16">
    <div class="mb-8 flex items-center justify-between">
      <h2 class="text-foreground flex items-center gap-3 text-2xl font-bold md:text-3xl">
        <FaStar className="text-secondary icon-lg icon-spacing-right" />
        Featured Projects
      </h2>
      <a href="/projects" class="text-secondary hover:text-secondary-hover hidden items-center gap-2 font-medium md:flex">
        View all projects <FaArrowRight className="icon-sm" />
      </a>
    </div>

    <div class="grid gap-8 md:grid-cols-2 lg:grid-cols-3">
      {featuredProjects.map(project => <ProjectCard project={project} showCompletedDate={false} />)}
    </div>

    <a
      href="/projects"
      class="text-secondary hover:text-secondary-hover mt-6 flex items-center justify-end gap-2 font-medium md:hidden"
    >
      View all projects <FaArrowRight className="icon-sm" />
    </a>
  </section>

  <!-- Experience Section -->
  <section class="animate-section mb-16">
    <div class="mb-8 flex items-center justify-between">
      <h2 class="text-foreground flex items-center gap-3 text-2xl font-bold md:text-3xl">
        <FaBriefcase className="text-secondary icon-lg icon-spacing-right" />
        Professional Experience
      </h2>
      <a href="/experience" class="text-secondary hover:text-secondary-hover hidden items-center gap-2 font-medium md:flex">
        View all experience <FaArrowRight className="icon-sm" />
      </a>
    </div>

    <div class="animate-content space-y-8">
      {sortedExperience.map(exp => <ExperienceCard experience={exp} showAllDetails={false} />)}
    </div>

    <a
      href="/experience"
      class="text-secondary hover:text-secondary-hover mt-6 flex items-center justify-end gap-2 font-medium md:hidden"
    >
      View all experience <FaArrowRight className="icon-sm" />
    </a>
  </section>

  <!-- Recent Blog Posts -->
  {
    recentPosts.length > 0 && (
      <section class="animate-section mb-16">
        <div class="mb-8 flex items-center justify-between">
          <h2 class="text-foreground flex items-center gap-3 text-2xl font-bold md:text-3xl">
            <FaEdit className="text-secondary icon-lg icon-spacing-right" />
            Latest Articles
          </h2>
          <a href="/blog" class="text-secondary hover:text-secondary-hover flex items-center gap-2 font-medium">
            View all posts <FaArrowRight className="icon-sm" />
          </a>
        </div>

        <div class="grid gap-6 md:grid-cols-3">
          {recentPosts.map(post => (
            <article class="animate-content bg-surface border-border rounded-lg border p-6 shadow-md transition-shadow hover:shadow-lg">
              <h3 class="text-foreground mb-3 text-lg font-semibold">
                <a href={`/blog/${post.data.slug}`} class="hover:text-secondary transition-colors">
                  {post.data.title}
                </a>
              </h3>
              <div class="text-foreground-muted mb-3 flex items-center text-sm">
                <FaCalendarAlt className="icon-base icon-spacing-right" />
                <time datetime={post.data.publishDate?.toISOString()}>
                  {post.data.publishDate?.toLocaleDateString('en-US', {
                    year: 'numeric',
                    month: 'short',
                    day: 'numeric',
                  })}
                </time>
              </div>
              {post.data.description && <p class="text-foreground-muted mb-4 text-sm leading-relaxed">{post.data.description}</p>}
              <a
                href={`/blog/${post.data.slug}`}
                class="text-secondary hover:text-secondary-hover flex items-center gap-1 font-medium"
              >
                Read more <FaArrowRight className="icon-sm" />
              </a>
            </article>
          ))}
        </div>
      </section>
    )
  }

  <!-- Contact Section -->
  <CTA />
>>>>>>> master
</MainLayout>
