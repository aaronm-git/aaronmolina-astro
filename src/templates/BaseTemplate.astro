---
/**
 * BaseTemplate - Core layout wrapper for content pages
 *
 * Provides consistent structure with:
 * - Back navigation
 * - HeroSection for title/description
 * - Content slot
 * - Optional CTA section
 *
 * @example
 * <BaseTemplate
 *   title="Page Title"
 *   description="Page description"
 *   headline="Main Headline"
 *   backLink={{ href: '/blog', label: 'Back to Blog' }}
 * >
 *   <Content />
 * </BaseTemplate>
 */
import MainLayout from '@/layouts/main-layout.astro';
import HeroSection from '@/components/organisms/sections/HeroSection.astro';
import CTASection from '@/components/organisms/sections/CTASection.astro';
import Button from '@/components/atoms/Button.astro';

interface BackLink {
  href: string;
  label: string;
}

interface CTAProps {
  title: string;
  description?: string;
  buttonLabel: string;
  buttonHref: string;
}

interface Props {
  /** Page title for meta tags */
  title: string;
  /** Page description for meta tags */
  description?: string;
  /** Main headline displayed in hero */
  headline: string;
  /** Subheadline displayed below headline */
  subheadline?: string;
  /** Hero description text */
  heroDescription?: string;
  /** Back navigation link */
  backLink?: BackLink;
  /** CTA section props (omit to hide) */
  cta?: CTAProps;
  /** Maximum content width */
  maxWidth?: 'sm' | 'md' | 'lg' | 'xl' | 'full';
  /** Additional class for the article wrapper */
  class?: string;
}

const {
  title,
  description,
  headline,
  subheadline,
  heroDescription,
  backLink,
  cta,
  maxWidth = 'lg',
  class: className = '',
} = Astro.props;

const maxWidthClasses: Record<string, string> = {
  sm: 'max-w-screen-sm',
  md: 'max-w-screen-md',
  lg: 'max-w-screen-lg',
  xl: 'max-w-screen-xl',
  full: 'max-w-full',
};
---

<MainLayout title={title} description={description}>
  <article class={`mx-auto ${maxWidthClasses[maxWidth]} ${className}`}>
    {/* Back Navigation */}
    {backLink && (
      <nav class="mb-4 px-4">
        <Button href={backLink.href} variant="ghost" icon="arrowLeft" size="sm">
          {backLink.label}
        </Button>
      </nav>
    )}

    {/* Hero Section */}
    <HeroSection
      variant="minimal"
      headline={headline}
      subheadline={subheadline}
      description={heroDescription}
      class="py-4"
    >
      <slot name="hero-extra" />
    </HeroSection>

    {/* Main Content */}
    <div class="px-4">
      <slot />
    </div>

    {/* CTA Section */}
    {cta && (
      <CTASection
        title={cta.title}
        description={cta.description}
        buttonLabel={cta.buttonLabel}
        buttonHref={cta.buttonHref}
        class="mt-12"
      />
    )}
  </article>
</MainLayout>
