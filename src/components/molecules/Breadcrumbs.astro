---
/**
 * Breadcrumbs - Navigation trail showing current page location
 * Displays breadcrumb items with Home always as the first item
 * Includes BreadcrumbList schema markup for SEO
 */
import type { BreadcrumbItem } from '@/utils/breadcrumbs';

interface Props {
  items: BreadcrumbItem[];
  class?: string;
}

const { items, class: className } = Astro.props;

// Generate schema.org BreadcrumbList
const breadcrumbSchema = {
  '@context': 'https://schema.org',
  '@type': 'BreadcrumbList',
  itemListElement: items.map((item, index) => ({
    '@type': 'ListItem',
    position: index + 1,
    name: item.label,
    item: new URL(item.href, Astro.site).href,
  })),
};
---

{items.length > 0 && (
  <>
    <script type="application/ld+json" set:html={JSON.stringify(breadcrumbSchema)} />
    <nav
      class={`mb-8 ${className || ''}`}
      aria-label="Breadcrumb"
    >
      <ol class="flex flex-wrap items-center gap-2 text-sm">
        {items.map((item, index) => (
          <li class="flex items-center gap-2">
            <a
              href={item.href}
              class={`transition-colors ${
                index === items.length - 1
                  ? 'text-foreground font-medium cursor-default pointer-events-none'
                  : 'text-foreground-muted hover:text-foreground'
              }`}
            >
              {item.label}
            </a>
            {index < items.length - 1 && (
              <span class="text-foreground-muted" aria-hidden="true">/</span>
            )}
          </li>
        ))}
      </ol>
    </nav>
  </>
)}
